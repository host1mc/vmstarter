#!/bin/bash
set -euo pipefail

# Color codes
GREEN="\e[32m"
CYAN="\e[36m"
YELLOW="\e[33m"
RESET="\e[0m"

# Function to display banner
display_banner() {
    clear
    echo -e "${CYAN}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—"
    echo -e "â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘"
    echo -e "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘"
    echo -e "â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘"
    echo -e "â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘"
    echo -e "â•šâ•â•      â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•${RESET}"
    echo -e "                       ${YELLOW}vps starter${RESET}"
    echo
}

# Function to list VMs
list_vms() {
    # Replace this with your real VM listing command
    # Example: virsh list --all | tail -n +3 | awk '{print $2}' 
    VMS=($(ls /home/endevil/vms))  # <-- example path; replace as needed

    echo -e "ğŸ“‹ ${GREEN}[INFO]${RESET} ğŸ“ Found ${#VMS[@]} existing VM(s):"
    for i in "${!VMS[@]}"; do
        echo -e "   $((i+1))) ${VMS[$i]} ğŸ’¤"
    done

    echo -e "\n\n"
}

# Function to start VM
start_vm() {
    VM="${1}"
    echo -e "\nğŸš€ Starting VM: ${GREEN}$VM${RESET} ..."
    # Replace below with actual start command
    # Example: virsh start "$VM"
    sleep 1  # simulate startup
    echo -e "âœ… VM ${GREEN}$VM${RESET} started!"
}

# Main
display_banner
list_vms

read -p "ğŸ¯ [INPUT] ğŸ¯ Enter your choice: " CHOICE

# Validate input
if [[ "$CHOICE" =~ ^[0-9]+$ ]] && [ "$CHOICE" -ge 1 ] && [ "$CHOICE" -le ${#VMS[@]} ]; then
    start_vm "${VMS[$((CHOICE-1))]}"
else
    echo -e "${YELLOW}[ERROR] Invalid selection!${RESET}"
fi
